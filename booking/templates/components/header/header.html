{% load static %}

<header class="site-header">
  <nav class="navbar">
    <div class="navbar-left">
      <h2 class="logo">TACE-Cleaning</h2>
    </div>

    <div class="navbar-right">
      <ul class="menu" id="mobileMenu">
        <li class="item"><a href="{% url 'home' %}">Home</a></li>
        <li class="item"><a href="{% url 'servicos' %}">Serviços</a></li>
        <li class="item"><a href="{% url 'book_service' %}">Agendar Serviços</a></li>
     
        <li><a href="{% url 'contact' %}" class="agendamento__btn">Contacte-nos</a></li>

        <li>
          <div class="profile-menu">
            <img src="{% static 'booking/images/user.png' %}" alt="Perfil" class="profile-icon" onclick="toggleProfileMenu()"/>
            <div class="profile-dropdown" id="profileDropdown">
              {% if request.user.is_authenticated %}
                <a href="{% url 'profile' %}">Perfil</a>
                <a href="#" onclick="document.getElementById('logoutForm').submit();" class="logout-link">Sair</a>
                <form id="logoutForm" method="post" action="{% url 'account_logout' %}" style="display: none;">
                  {% csrf_token %}
                </form>
              {% else %}
                <a href="{% url 'login' %}">Entrar</a>
                <a href="{% url 'signup' %}">Criar Conta</a>
              {% endif %}
            </div>
          </div>
        </li>
      </ul>


      <div class="hamburger" onclick="toggleMobileMenu()">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </nav>
</header>



























<script>
  // Aplica fundo e sombra ao rolar
  window.addEventListener("scroll", function () {
    const navbar = document.querySelector(".navbar");
    if (window.scrollY > 50) {
      navbar.classList.add("scrolled");
    } else {
      navbar.classList.remove("scrolled");
    }
  });

  // Esconde/mostra navbar com base na direção do scroll
  let lastScrollTop = 0;
  const navbar = document.querySelector('.navbar');

  window.addEventListener('scroll', function () {
    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

    if (scrollTop < lastScrollTop) {
      navbar.classList.remove('hidden'); // rolando para cima
    } else {
      navbar.classList.add('hidden'); // rolando para baixo
    }

    lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
  });

  // Alterna menu mobile
  function toggleMobileMenu() {
    const menu = document.getElementById("mobileMenu");
    menu.classList.toggle("active");
  }

  // Alterna dropdown de perfil
  function toggleProfileMenu() {
    const dropdown = document.getElementById("profileDropdown");
    dropdown.style.display =
      dropdown.style.display === "block" ? "none" : "block";
  }

  // Fecha dropdown ao clicar fora
  window.addEventListener("click", function (e) {
    const icon = document.querySelector(".profile-icon");
    const dropdown = document.getElementById("profileDropdown");
    if (!icon.contains(e.target) && !dropdown.contains(e.target)) {
      dropdown.style.display = "none";
    }
  });
</script>




